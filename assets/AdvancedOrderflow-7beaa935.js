import{o as a,c as n,a as p}from"./index-ff969378.js";const c={class:"md-content__inner md-typeset"},o={__name:"AdvancedOrderflow",setup(l){return(e,s)=>(a(),n("article",c,s[0]||(s[0]=[p(`<h1 id="orderflow-data"> 주문 흐름 고급 분석 가이드 <a class="headerlink" href="#orderflow-data" title="영구 링크"> ¶ </a></h1><p>이 가이드는 Freqtrade에서 고급 주문 흐름(Orderflow) 분석을 위해 공개 거래 데이터를 활용하는 방법을 설명합니다.</p><div class="admonition warning"><p class="admonition-title">실험적 기능</p><p> 주문 흐름 기능은 현재 베타 상태이며, 향후 릴리스에서 변경될 수 있습니다. 문제나 피드백은 <a href="https://github.com/freqtrade/freqtrade/issues"> Freqtrade GitHub 저장소 </a> 에 보고해 주세요. 또한, 이 기능은 freqAI와 함께 테스트되지 않았으며, 두 기능을 결합하는 것은 현재 범위에 포함되지 않습니다. </p></div><div class="admonition warning"><p class="admonition-title">성능</p><p>주문 흐름은 원시 거래 데이터를 필요로 합니다. 이 데이터는 크기가 크며, Freqtrade가 마지막 X 캔들에 대한 거래 데이터를 다운로드해야 할 때 초기 시작이 느려질 수 있습니다. 또한, 이 기능을 활성화하면 메모리 사용량이 증가합니다. 충분한 리소스를 확보해 주세요.</p></div><h2 id="getting-started"> 시작하기 <a class="headerlink" href="#getting-started" title="영구 링크"> ¶ </a></h2><h3 id="enable-public-trades"> 공개 거래 활성화 <a class="headerlink" href="#enable-public-trades" title="영구 링크"> ¶ </a></h3><p><code> config.json </code> 파일에서 <code> exchange </code> 섹션 아래에 <code> use_public_trades </code> 옵션을 true로 설정하세요. </p><div class="highlight"><pre><code><span class="nt">&quot;exchange&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="err">...</span>
<span class="w">   </span><span class="nt">&quot;use_public_trades&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div><h3 id="configure-orderflow-processing"> 주문 흐름 처리 설정 <a class="headerlink" href="#configure-orderflow-processing" title="영구 링크"> ¶ </a></h3><p><code>config.json</code>의 <code>orderflow</code> 섹션에서 다음과 같은 설정을 정의할 수 있습니다:</p><ul><li><code>cache_size</code>: 캐시에 저장할 이전 주문 흐름 캔들의 개수 (새 캔들마다 계산하는 대신 저장)</li><li><code>max_candles</code>: 가져올 거래 데이터의 최대 캔들 수</li><li><code>scale</code>: 풋프린트 차트의 가격 구간 크기</li><li><code>stacked_imbalance_range</code>: 분석할 최소 연속 불균형 가격 수준</li><li><code>imbalance_volume</code>: 이 값 미만의 불균형은 필터링</li><li><code>imbalance_ratio</code>: 이 비율(매수/매도 거래량 차이) 미만의 불균형은 필터링</li></ul><div class="highlight"><pre><code><span class="nt">&quot;orderflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;cache_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="nt">&quot;max_candles&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="nt">&quot;scale&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="nt">&quot;stacked_imbalance_range&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// 최소 연속 불균형</span>
<span class="w">    </span><span class="nt">&quot;imbalance_volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// 필터링 기준</span>
<span class="w">    </span><span class="nt">&quot;imbalance_ratio&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1">// 비율 기준</span>
<span class="w">  </span><span class="p">},</span>
</code></pre></div><h2 id="downloading-trade-data-for-backtesting"> 백테스팅을 위한 거래 데이터 다운로드 <a class="headerlink" href="#downloading-trade-data-for-backtesting" title="영구 링크"> ¶ </a></h2><p>백테스팅을 위해 과거 거래 데이터를 다운로드하려면 freqtrade download-data 명령어에 --dl-trades 플래그를 사용하세요.</p><div class="highlight"><pre><code>freqtrade<span class="w"> </span>download-data<span class="w"> </span>-p<span class="w"> </span>BTC/USDT:USDT<span class="w"> </span>--timerange<span class="w"> </span><span class="m">20230101</span>-<span class="w"> </span>--trading-mode<span class="w"> </span>futures<span class="w"> </span>--timeframes<span class="w"> </span>5m<span class="w"> </span>--dl-trades
</code></pre></div><div class="admonition warning"><p class="admonition-title">데이터 가용성</p><p> 모든 거래소가 공개 거래 데이터를 제공하는 것은 아닙니다. 지원되는 거래소의 경우, freqtrade는 <code> --dl-trades </code> 플래그를 사용하여 데이터를 다운로드할 때 공개 거래 데이터가 제공되지 않으면 경고합니다. </p></div><h2 id="accessing-orderflow-data"> 주문 흐름 데이터 활용 <a class="headerlink" href="#accessing-orderflow-data" title="영구 링크"> ¶ </a></h2><p>활성화하면 데이터프레임에 다음과 같은 새로운 열이 추가됩니다:</p><div class="highlight"><pre><code><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;trades&quot;</span><span class="p">]</span> <span class="c1"># 개별 거래 정보</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;orderflow&quot;</span><span class="p">]</span> <span class="c1"># 풋프린트 차트 데이터 (아래 참조)</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;imbalances&quot;</span><span class="p">]</span> <span class="c1"># 주문 흐름 불균형 정보</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;bid&quot;</span><span class="p">]</span> <span class="c1"># 총 매수 거래량</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;ask&quot;</span><span class="p">]</span> <span class="c1"># 총 매도 거래량</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;delta&quot;</span><span class="p">]</span> <span class="c1"># 매수/매도 거래량 차이</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;min_delta&quot;</span><span class="p">]</span> <span class="c1"># 캔들 내 최소 델타</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;max_delta&quot;</span><span class="p">]</span> <span class="c1"># 캔들 내 최대 델타</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;total_trades&quot;</span><span class="p">]</span> <span class="c1"># 총 거래 건수</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;stacked_imbalances_bid&quot;</span><span class="p">]</span> <span class="c1"># 연속 매수 불균형 시작 가격 목록</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;stacked_imbalances_ask&quot;</span><span class="p">]</span> <span class="c1"># 연속 매도 불균형 시작 가격 목록</span></code></pre></div><p>이 열은 전략 코드에서 추가 분석을 위해 접근할 수 있습니다. 다음은 예제입니다:</p><div class="highlight"><pre><code><span class="k">def</span><span class="w"> </span><span class="nf">populate_indicators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
    <span class="c1"># 누적 델타 계산</span>
    <span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;cum_delta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cumulative_delta</span><span class="p">(</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;delta&quot;</span><span class="p">])</span>
    <span class="c1"># 총 거래 수 접근</span>
    <span class="n">total_trades</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;total_trades&quot;</span><span class="p">]</span>
    <span class="o">...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">cumulative_delta</span><span class="p">(</span><span class="n">delta</span><span class="p">:</span> <span class="n">Series</span><span class="p">):</span>
    <span class="n">cumdelta</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cumdelta</span>
</code></pre></div><h3 id="footprint-chart-dataframeorderflow"> 풋프린트 차트 (<code>dataframe[&quot;orderflow&quot;]</code>) <a class="headerlink" href="#footprint-chart-dataframeorderflow" title="영구 링크"> ¶ </a></h3><p>이 열은 각 가격 수준에서의 매수/매도 주문 세부 정보를 제공하여 주문 흐름의 역학 관계를 파악하는 데 도움이 됩니다. 설정의 <code>scale</code> 매개변수로 가격 구간의 크기를 조정할 수 있습니다.</p><p><code> orderflow </code> 열은 다음 구조를 가진 dict를 포함합니다: </p><div class="highlight"><pre><code><span class="go">{</span>
<span class="go">    &quot;price&quot;: {</span>
<span class="go">        &quot;bid_amount&quot;: 0.0,</span>
<span class="go">        &quot;ask_amount&quot;: 0.0,</span>
<span class="go">        &quot;bid&quot;: 0,</span>
<span class="go">        &quot;ask&quot;: 0,</span>
<span class="go">        &quot;delta&quot;: 0.0,</span>
<span class="go">        &quot;total_volume&quot;: 0.0,</span>
<span class="go">        &quot;total_trades&quot;: 0</span>
<span class="go">    }</span>
<span class="go">}</span>
</code></pre></div><h4 id="orderflow-column-explanation"> 주문 흐름 데이터 구조 설명 <a class="headerlink" href="#orderflow-column-explanation" title="영구 링크"> ¶ </a></h4><ul><li>key: <code>scale</code> 간격으로 나눈 가격 구간</li><li><code>bid_amount</code>: 해당 가격 수준의 총 매수 거래량</li><li><code>ask_amount</code>: 해당 가격 수준의 총 매도 거래량</li><li><code>bid</code>: 해당 가격 수준의 매수 주문 건수</li><li><code>ask</code>: 해당 가격 수준의 매도 주문 건수</li><li><code>delta</code>: 해당 가격 수준의 매수/매도 거래량 차이</li><li><code>total_volume</code>: 해당 가격 수준의 총 거래량 (매수 + 매도)</li><li><code>total_trades</code>: 해당 가격 수준의 총 거래 건수 (매수 + 매도)</li></ul><p>이러한 데이터를 활용하여 시장 심리를 분석하고 주문 흐름 기반의 거래 기회를 포착할 수 있습니다.</p><h3 id="raw-trades-data-dataframetrades"> 개별 거래 데이터 (<code>dataframe[&quot;trades&quot;]</code>) <a class="headerlink" href="#raw-trades-data-dataframetrades" title="영구 링크"> ¶ </a></h3><p>각 캔들 기간 동안 발생한 모든 개별 거래의 목록입니다. 이 데이터를 통해 주문 흐름의 미시적 구조를 더 자세히 분석할 수 있습니다.</p><p>각 거래 항목은 다음과 같은 정보를 포함합니다:</p><ul><li><code>timestamp</code>: 거래 발생 시각</li><li><code>date</code>: 거래 날짜</li><li><code>price</code>: 거래 가격</li><li><code>amount</code>: 거래량</li><li><code>side</code>: 거래 방향(매수/매도)</li><li><code>id</code>: 거래 고유 식별자</li><li><code>cost</code>: 총 거래 금액(가격 × 거래량)</li></ul><h3 id="imbalances-dataframeimbalances"> 거래량 불균형 (<code>dataframe[&quot;imbalances&quot;]</code>) <a class="headerlink" href="#imbalances-dataframeimbalances" title="영구 링크"> ¶ </a></h3><p>이 열은 주문 흐름의 불균형 정보를 담고 있는 딕셔너리를 제공합니다. 불균형은 특정 가격 수준에서 매수와 매도 거래량 사이에 큰 차이가 발생할 때 감지됩니다.</p><p>각 행은 다음과 같이 보입니다 - 가격을 인덱스로 하고, 해당하는 매수 및 매도 불균형 값을 열로 가집니다</p><div class="highlight"><pre><code><span class="go">{</span>
<span class="go">    &quot;price&quot;: {</span>
<span class="go">        &quot;bid_imbalance&quot;: False,</span>
<span class="go">        &quot;ask_imbalance&quot;: False</span>
<span class="go">    }</span>
<span class="go">}</span>
</code></pre></div>`,36)])))}};export{o as default};
